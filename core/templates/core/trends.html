{% extends 'core/base.html' %}
{% load custom_tags %}

{% block content %}
<table align="center">
  <tr>
    <td>      
      <h2 class="main_h2">Top/Worst assets by time frame</h2>
      {% for tf, paired_list in trends_data.items %}
        <table align="center" class="trends-table">
          <tr>
            <th colspan="4">{{ tf|capfirst }}</th>
          </tr>
          <tr>
            <th>Best</th><th>change %</th><th>Worst</th><th>change %</th>
          </tr>
          {% for pair in paired_list %}
          <tr>
            <td>{% if pair.best %}{{ pair.best.symbol }}{% endif %}</td>
            <td>{% if pair.best %}{{ pair.best.change_pct|floatformat:2 }}{% endif %}</td>
            <td>{% if pair.worst %}{{ pair.worst.symbol }}{% endif %}</td>
            <td>{% if pair.worst %}{{ pair.worst.change_pct|floatformat:2 }}{% endif %}</td>
          </tr>
          {% endfor %}
        </table>
        <br>
      {% endfor %}

      <h2 class="main_h2">Average change by asset type</h2>
      <table align="center" class="trends-table">
        <tr>
          <th>Asset type</th>
          {% for tf in timeframes %}<th>{{ tf|capfirst }}</th>{% endfor %}
        </tr>
        {% for atype, values in type_trends.items %}
        <tr>
          <td>{{ atype }}</td>
          {% for tf in timeframes %}
            <td>
              {% with val=values|get:tf %}
                {% if val %}
                  {{ val|floatformat:2 }}%
                {% else %}
                  -
                {% endif %}
              {% endwith %}
            </td>
          {% endfor %}
        </tr>
        {% endfor %}
      </table>
    </td>
  </tr>
</table>
    <p class="form-link-comeback">
    <a href="{% url 'profile' %}">Back to profile</a>
  </p>
{% endblock %}
